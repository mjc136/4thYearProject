version: "3.1"

stories:

- story: User says goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- story: User challenges bot identity
  steps:
    - intent: bot_challenge
    - action: utter_iamabot

- story: Main flow
  steps:
    - intent: greet
    - action: utter_greet
    - action: language_form
    - active_loop: language_form
    - slot_was_set:
        - preferred_language: "Spanish"
        - language_proficiency: "beginner"
    - active_loop: null
    - action: utter_language_set
    - action: utter_proficiency_set
    - action: scenario_form
    - active_loop: scenario_form
    - slot_was_set:
        - selected_scenario: "Order in restaurant"
    - active_loop: null
    - action: utter_scenario_set

- story: Taxi Scenario Role-Play with Translations
  steps:
    - intent: choose_scenario
      entities:
        - scenario: "taxi"
    - slot_was_set:
        - utterance_to_translate: "Where would you like to go?"
    - action: action_translate_utterance
    - intent: inform  # User provides their destination
    - slot_was_set:
        - utterance_to_translate: "Great! Heading to {destination}."
    - action: action_translate_utterance
    - intent: affirm  # User confirms
    - slot_was_set:
        - utterance_to_translate: "The fare will be $10. Is that okay?"
    - action: action_translate_utterance
